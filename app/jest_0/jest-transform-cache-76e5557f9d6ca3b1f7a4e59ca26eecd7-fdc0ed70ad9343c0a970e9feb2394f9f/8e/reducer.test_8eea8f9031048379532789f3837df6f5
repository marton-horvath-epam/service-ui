e4dc1e5ba2b5cc07fe11ff534eed8bc7
'use strict';var _constants = require('./constants');













var _reducer = require('./reducer');

var TEST_NAMESPACE = 'test';

describe('groupOperations reducers', function () {
  describe('lastOperationReducer', function () {
    var reducer = (0, _reducer.lastOperationReducer)(TEST_NAMESPACE);

    test('should return initial state', function () {
      expect(reducer(undefined, {})).toBe(_constants.LAST_OPERATION_INITIAL_STATE);
    });

    test('should return old state on unknown action', function () {
      var oldState = 'oldState';
      expect(reducer(oldState, { type: 'foo' })).toBe(oldState);
    });

    test('should return old state on unknown namespace', function () {
      var oldState = 'oldState';
      var newState = reducer(oldState, {
        type: _constants.SET_LAST_OPERATION_NAME,
        payload: 'foo',
        meta: {
          namespace: 'other' } });


      expect(newState).toBe(oldState);
    });

    test('should handle SET_LAST_OPERATION_NAME', function () {
      var oldState = 'oldOperation';
      var payload = 'newOperation';
      var newState = reducer(oldState, {
        type: _constants.SET_LAST_OPERATION_NAME,
        payload: payload,
        meta: {
          namespace: TEST_NAMESPACE } });


      expect(newState).toBe(payload);
    });
  });

  describe('validationErrorsReducer', function () {
    var reducer = (0, _reducer.validationErrorsReducer)(TEST_NAMESPACE);

    test('should return initial state', function () {
      expect(reducer(undefined, {})).toBe(_constants.VALIDATION_ERRORS_INITIAL_STATE);
    });

    test('should return old state on unknown action', function () {
      var oldState = 'oldState';
      expect(reducer(oldState, { type: 'foo' })).toBe(oldState);
    });

    test('should return old state on unknown namespace', function () {
      var oldState = 'oldState';
      var newState = reducer(oldState, {
        type: _constants.SET_VALIDATION_ERRORS,
        payload: { foo: 1 },
        meta: {
          namespace: 'other' } });


      expect(newState).toBe(oldState);
    });

    test('should handle SET_VALIDATION_ERRORS', function () {
      var oldState = { foo: 1 };
      var payload = { bar: 2 };
      var newState = reducer(oldState, {
        type: _constants.SET_VALIDATION_ERRORS,
        payload: payload,
        meta: {
          namespace: TEST_NAMESPACE } });


      expect(newState).toEqual(payload);
    });

    test('should handle RESET_VALIDATION_ERRORS', function () {
      var oldState = { foo: 1 };
      var newState = reducer(oldState, {
        type: _constants.RESET_VALIDATION_ERRORS,
        meta: {
          namespace: TEST_NAMESPACE } });


      expect(newState).toEqual(_constants.VALIDATION_ERRORS_INITIAL_STATE);
    });

    test('should handle REMOVE_VALIDATION_ERRORS', function () {
      var oldState = { foo: 1, bar: 2 };
      var newState = reducer(oldState, {
        type: _constants.REMOVE_VALIDATION_ERRORS,
        payload: ['foo'],
        meta: {
          namespace: TEST_NAMESPACE } });


      expect(newState).toEqual({ bar: 2 });
    });
  });

  describe('selectedItemsReducer', function () {
    var reducer = (0, _reducer.selectedItemsReducer)(TEST_NAMESPACE);

    test('should return initial state', function () {
      expect(reducer(undefined, {})).toBe(_constants.SELECTED_ITEMS_INITIAL_STATE);
    });

    test('should return old state on unknown action', function () {
      var oldState = [{ id: 1 }];
      expect(reducer(oldState, { type: 'foo' })).toBe(oldState);
    });

    test('should return old state on unknown namespace', function () {
      var oldState = [{ id: 1 }];
      var newState = reducer(oldState, {
        type: _constants.SELECT_ITEMS,
        payload: { id: 2 },
        meta: {
          namespace: 'other' } });


      expect(newState).toBe(oldState);
    });

    test('should handle SELECT_ITEMS', function () {
      var oldState = [{ id: 1 }];
      var payload = [{ id: 2 }, { id: 3 }];
      var newState = reducer(oldState, {
        type: _constants.SELECT_ITEMS,
        payload: payload,
        meta: {
          namespace: TEST_NAMESPACE } });


      expect(newState).toEqual([].concat(oldState, payload));
    });

    test('should ignore duplicate items on SELECT_ITEMS', function () {
      var oldState = [{ id: 1 }, { id: 2 }];
      var payload = [{ id: 2 }, { id: 3 }];
      var newState = reducer(oldState, {
        type: _constants.SELECT_ITEMS,
        payload: payload,
        meta: {
          namespace: TEST_NAMESPACE } });


      expect(newState).toEqual([{ id: 1 }, { id: 2 }, { id: 3 }]);
    });

    test('should handle UNSELECT_ITEMS', function () {
      var oldState = [{ id: 1 }, { id: 2 }, { id: 3 }];
      var payload = [{ id: 2 }, { id: 3 }];
      var newState = reducer(oldState, {
        type: _constants.UNSELECT_ITEMS,
        payload: payload,
        meta: {
          namespace: TEST_NAMESPACE } });


      expect(newState).toEqual([{ id: 1 }]);
    });

    describe('TOGGLE_ALL_ITEMS', function () {
      test('should add non-selected items in case there are some', function () {
        var oldState = [{ id: 1 }];
        var payload = [{ id: 1 }, { id: 2 }, { id: 3 }];
        var newState = reducer(oldState, {
          type: _constants.TOGGLE_ALL_ITEMS,
          payload: payload,
          meta: {
            namespace: TEST_NAMESPACE } });


        expect(newState).toEqual([{ id: 1 }, { id: 2 }, { id: 3 }]);
      });

      test('should unselect items in case there are no new items', function () {
        var oldState = [{ id: 1 }, { id: 2 }];
        var payload = [{ id: 1 }];
        var newState = reducer(oldState, {
          type: _constants.TOGGLE_ALL_ITEMS,
          payload: payload,
          meta: {
            namespace: TEST_NAMESPACE } });


        expect(newState).toEqual([{ id: 2 }]);
      });
    });

    test('should handle UNSELECT_ALL_ITEMS', function () {
      var oldState = [{ id: 2 }, { id: 3 }];
      var newState = reducer(oldState, {
        type: _constants.UNSELECT_ALL_ITEMS,
        meta: {
          namespace: TEST_NAMESPACE } });


      expect(newState).toEqual([]);
    });

    test('should handle TOGGLE_ITEM_SELECTION', function () {
      var oldState = [{ id: 1 }];
      var stateWithTwoItems = reducer(oldState, {
        type: _constants.TOGGLE_ITEM_SELECTION,
        payload: { id: 3 },
        meta: {
          namespace: TEST_NAMESPACE } });


      expect(stateWithTwoItems).toEqual([{ id: 1 }, { id: 3 }]);
      var stateWithOneItem = reducer(stateWithTwoItems, {
        type: _constants.TOGGLE_ITEM_SELECTION,
        payload: { id: 1 },
        meta: {
          namespace: TEST_NAMESPACE } });


      expect(stateWithOneItem).toEqual([{ id: 3 }]);
    });
  });
});;var _temp = function () {if (typeof __REACT_HOT_LOADER__ === 'undefined') {return;}__REACT_HOT_LOADER__.register(TEST_NAMESPACE, 'TEST_NAMESPACE', '/volumeC/workspace/service-ui - RELEASE/src/github.com/reportportal/service-ui/app/src/controllers/groupOperations/reducer.test.js');}();;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlZHVjZXIudGVzdC5qcyJdLCJuYW1lcyI6WyJURVNUX05BTUVTUEFDRSIsImRlc2NyaWJlIiwicmVkdWNlciIsInRlc3QiLCJleHBlY3QiLCJ1bmRlZmluZWQiLCJ0b0JlIiwiTEFTVF9PUEVSQVRJT05fSU5JVElBTF9TVEFURSIsIm9sZFN0YXRlIiwidHlwZSIsIm5ld1N0YXRlIiwiU0VUX0xBU1RfT1BFUkFUSU9OX05BTUUiLCJwYXlsb2FkIiwibWV0YSIsIm5hbWVzcGFjZSIsIlZBTElEQVRJT05fRVJST1JTX0lOSVRJQUxfU1RBVEUiLCJTRVRfVkFMSURBVElPTl9FUlJPUlMiLCJmb28iLCJiYXIiLCJ0b0VxdWFsIiwiUkVTRVRfVkFMSURBVElPTl9FUlJPUlMiLCJSRU1PVkVfVkFMSURBVElPTl9FUlJPUlMiLCJTRUxFQ1RFRF9JVEVNU19JTklUSUFMX1NUQVRFIiwiaWQiLCJTRUxFQ1RfSVRFTVMiLCJVTlNFTEVDVF9JVEVNUyIsIlRPR0dMRV9BTExfSVRFTVMiLCJVTlNFTEVDVF9BTExfSVRFTVMiLCJzdGF0ZVdpdGhUd29JdGVtcyIsIlRPR0dMRV9JVEVNX1NFTEVDVElPTiIsInN0YXRlV2l0aE9uZUl0ZW0iXSwibWFwcGluZ3MiOiJhQUFBOzs7Ozs7Ozs7Ozs7OztBQWNBOztBQUVBLElBQU1BLGlCQUFpQixNQUF2Qjs7QUFFQUMsU0FBUywwQkFBVCxFQUFxQyxZQUFNO0FBQ3pDQSxXQUFTLHNCQUFULEVBQWlDLFlBQU07QUFDckMsUUFBTUMsVUFBVSxtQ0FBcUJGLGNBQXJCLENBQWhCOztBQUVBRyxTQUFLLDZCQUFMLEVBQW9DLFlBQU07QUFDeENDLGFBQU9GLFFBQVFHLFNBQVIsRUFBbUIsRUFBbkIsQ0FBUCxFQUErQkMsSUFBL0IsQ0FBb0NDLHVDQUFwQztBQUNELEtBRkQ7O0FBSUFKLFNBQUssMkNBQUwsRUFBa0QsWUFBTTtBQUN0RCxVQUFNSyxXQUFXLFVBQWpCO0FBQ0FKLGFBQU9GLFFBQVFNLFFBQVIsRUFBa0IsRUFBRUMsTUFBTSxL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cnQge1xuICBTRVRfTEFTVF9PUEVSQVRJT05fTkFNRSxcbiAgUkVTRVRfVkFMSURBVElPTl9FUlJPUlMsXG4gIFJFTU9WRV9WQUxJREFUSU9OX0VSUk9SUyxcbiAgU0VUX1ZBTElEQVRJT05fRVJST1JTLFxuICBTRUxFQ1RFRF9JVEVNU19JTklUSUFMX1NUQVRFLFxuICBWQUxJREFUSU9OX0VSUk9SU19JTklUSUFMX1NUQVRFLFxuICBMQVNUX09QRVJBVElPTl9JTklUSUFMX1NUQVRFLFxuICBTRUxFQ1RfSVRFTVMsXG4gIFRPR0dMRV9JVEVNX1NFTEVDVElPTixcbiAgVU5TRUxFQ1RfQUxMX0lURU1TLFxuICBVTlNFTEVDVF9JVEVNUyxcbiAgVE9HR0xFX0FMTF9JVEVNUyxcbn0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgbGFzdE9wZXJhdGlvblJlZHVjZXIsIHZhbGlkYXRpb25FcnJvcnNSZWR1Y2VyLCBzZWxlY3RlZEl0ZW1zUmVkdWNlciB9IGZyb20gJy4vcmVkdWNlcic7XG5cbmNvbnN0IFRFU1RfTkFNRVNQQUNFID0gJ3Rlc3QnO1xuXG5kZXNjcmliZSgnZ3JvdXBPcGVyYXRpb25zIHJlZHVjZXJzJywgKCkgPT4ge1xuICBkZXNjcmliZSgnbGFzdE9wZXJhdGlvblJlZHVjZXInLCAoKSA9PiB7XG4gICAgY29uc3QgcmVkdWNlciA9IGxhc3RPcGVyYXRpb25SZWR1Y2VyKFRFU1RfTkFNRVNQQUNFKTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gaW5pdGlhbCBzdGF0ZScsICgpID0+IHtcbiAgICAgIGV4cGVjdChyZWR1Y2VyKHVuZGVmaW5lZCwge30pKS50b0JlKExBU1RfT1BFUkFUSU9OX0lOSVRJQUxfU1RBVEUpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBvbGQgc3RhdGUgb24gdW5rbm93biBhY3Rpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBvbGRTdGF0ZSA9ICdvbGRTdGF0ZSc7XG4gICAgICBleHBlY3QocmVkdWNlcihvbGRTdGF0ZSwgeyB0eXBlOiAnZm9vJyB9KSkudG9CZShvbGRTdGF0ZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIG9sZCBzdGF0ZSBvbiB1bmtub3duIG5hbWVzcGFjZScsICgpID0+IHtcbiAgICAgIGNvbnN0IG9sZFN0YXRlID0gJ29sZFN0YXRlJztcbiAgICAgIGNvbnN0IG5ld1N0YXRlID0gcmVkdWNlcihvbGRTdGF0ZSwge1xuICAgICAgICB0eXBlOiBTRVRfTEFTVF9PUEVSQVRJT05fTkFNRSxcbiAgICAgICAgcGF5bG9hZDogJ2ZvbycsXG4gICAgICAgIG1ldGE6IHtcbiAgICAgICAgICBuYW1lc3BhY2U6ICdvdGhlcicsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChuZXdTdGF0ZSkudG9CZShvbGRTdGF0ZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIFNFVF9MQVNUX09QRVJBVElPTl9OQU1FJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb2xkU3RhdGUgPSAnb2xkT3BlcmF0aW9uJztcbiAgICAgIGNvbnN0IHBheWxvYWQgPSAnbmV3T3BlcmF0aW9uJztcbiAgICAgIGNvbnN0IG5ld1N0YXRlID0gcmVkdWNlcihvbGRTdGF0ZSwge1xuICAgICAgICB0eXBlOiBTRVRfTEFTVF9PUEVSQVRJT05fTkFNRSxcbiAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgbWV0YToge1xuICAgICAgICAgIG5hbWVzcGFjZTogVEVTVF9OQU1FU1BBQ0UsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChuZXdTdGF0ZSkudG9CZShwYXlsb2FkKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3ZhbGlkYXRpb25FcnJvcnNSZWR1Y2VyJywgKCkgPT4ge1xuICAgIGNvbnN0IHJlZHVjZXIgPSB2YWxpZGF0aW9uRXJyb3JzUmVkdWNlcihURVNUX05BTUVTUEFDRSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIGluaXRpYWwgc3RhdGUnLCAoKSA9PiB7XG4gICAgICBleHBlY3QocmVkdWNlcih1bmRlZmluZWQsIHt9KSkudG9CZShWQUxJREFUSU9OX0VSUk9SU19JTklUSUFMX1NUQVRFKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gb2xkIHN0YXRlIG9uIHVua25vd24gYWN0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb2xkU3RhdGUgPSAnb2xkU3RhdGUnO1xuICAgICAgZXhwZWN0KHJlZHVjZXIob2xkU3RhdGUsIHsgdHlwZTogJ2ZvbycgfSkpLnRvQmUob2xkU3RhdGUpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBvbGQgc3RhdGUgb24gdW5rbm93biBuYW1lc3BhY2UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBvbGRTdGF0ZSA9ICdvbGRTdGF0ZSc7XG4gICAgICBjb25zdCBuZXdTdGF0ZSA9IHJlZHVjZXIob2xkU3RhdGUsIHtcbiAgICAgICAgdHlwZTogU0VUX1ZBTElEQVRJT05fRVJST1JTLFxuICAgICAgICBwYXlsb2FkOiB7IGZvbzogMSB9LFxuICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgbmFtZXNwYWNlOiAnb3RoZXInLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBleHBlY3QobmV3U3RhdGUpLnRvQmUob2xkU3RhdGUpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBTRVRfVkFMSURBVElPTl9FUlJPUlMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBvbGRTdGF0ZSA9IHsgZm9vOiAxIH07XG4gICAgICBjb25zdCBwYXlsb2FkID0geyBiYXI6IDIgfTtcbiAgICAgIGNvbnN0IG5ld1N0YXRlID0gcmVkdWNlcihvbGRTdGF0ZSwge1xuICAgICAgICB0eXBlOiBTRVRfVkFMSURBVElPTl9FUlJPUlMsXG4gICAgICAgIHBheWxvYWQsXG4gICAgICAgIG1ldGE6IHtcbiAgICAgICAgICBuYW1lc3BhY2U6IFRFU1RfTkFNRVNQQUNFLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBleHBlY3QobmV3U3RhdGUpLnRvRXF1YWwocGF5bG9hZCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIFJFU0VUX1ZBTElEQVRJT05fRVJST1JTJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb2xkU3RhdGUgPSB7IGZvbzogMSB9O1xuICAgICAgY29uc3QgbmV3U3RhdGUgPSByZWR1Y2VyKG9sZFN0YXRlLCB7XG4gICAgICAgIHR5cGU6IFJFU0VUX1ZBTElEQVRJT05fRVJST1JTLFxuICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgbmFtZXNwYWNlOiBURVNUX05BTUVTUEFDRSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KG5ld1N0YXRlKS50b0VxdWFsKFZBTElEQVRJT05fRVJST1JTX0lOSVRJQUxfU1RBVEUpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBSRU1PVkVfVkFMSURBVElPTl9FUlJPUlMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBvbGRTdGF0ZSA9IHsgZm9vOiAxLCBiYXI6IDIgfTtcbiAgICAgIGNvbnN0IG5ld1N0YXRlID0gcmVkdWNlcihvbGRTdGF0ZSwge1xuICAgICAgICB0eXBlOiBSRU1PVkVfVkFMSURBVElPTl9FUlJPUlMsXG4gICAgICAgIHBheWxvYWQ6IFsnZm9vJ10sXG4gICAgICAgIG1ldGE6IHtcbiAgICAgICAgICBuYW1lc3BhY2U6IFRFU1RfTkFNRVNQQUNFLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBleHBlY3QobmV3U3RhdGUpLnRvRXF1YWwoeyBiYXI6IDIgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdzZWxlY3RlZEl0ZW1zUmVkdWNlcicsICgpID0+IHtcbiAgICBjb25zdCByZWR1Y2VyID0gc2VsZWN0ZWRJdGVtc1JlZHVjZXIoVEVTVF9OQU1FU1BBQ0UpO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBpbml0aWFsIHN0YXRlJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHJlZHVjZXIodW5kZWZpbmVkLCB7fSkpLnRvQmUoU0VMRUNURURfSVRFTVNfSU5JVElBTF9TVEFURSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIG9sZCBzdGF0ZSBvbiB1bmtub3duIGFjdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IG9sZFN0YXRlID0gW3sgaWQ6IDEgfV07XG4gICAgICBleHBlY3QocmVkdWNlcihvbGRTdGF0ZSwgeyB0eXBlOiAnZm9vJyB9KSkudG9CZShvbGRTdGF0ZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIG9sZCBzdGF0ZSBvbiB1bmtub3duIG5hbWVzcGFjZScsICgpID0+IHtcbiAgICAgIGNvbnN0IG9sZFN0YXRlID0gW3sgaWQ6IDEgfV07XG4gICAgICBjb25zdCBuZXdTdGF0ZSA9IHJlZHVjZXIob2xkU3RhdGUsIHtcbiAgICAgICAgdHlwZTogU0VMRUNUX0lURU1TLFxuICAgICAgICBwYXlsb2FkOiB7IGlkOiAyIH0sXG4gICAgICAgIG1ldGE6IHtcbiAgICAgICAgICBuYW1lc3BhY2U6ICdvdGhlcicsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChuZXdTdGF0ZSkudG9CZShvbGRTdGF0ZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIFNFTEVDVF9JVEVNUycsICgpID0+IHtcbiAgICAgIGNvbnN0IG9sZFN0YXRlID0gW3sgaWQ6IDEgfV07XG4gICAgICBjb25zdCBwYXlsb2FkID0gW3sgaWQ6IDIgfSwgeyBpZDogMyB9XTtcbiAgICAgIGNvbnN0IG5ld1N0YXRlID0gcmVkdWNlcihvbGRTdGF0ZSwge1xuICAgICAgICB0eXBlOiBTRUxFQ1RfSVRFTVMsXG4gICAgICAgIHBheWxvYWQsXG4gICAgICAgIG1ldGE6IHtcbiAgICAgICAgICBuYW1lc3BhY2U6IFRFU1RfTkFNRVNQQUNFLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBleHBlY3QobmV3U3RhdGUpLnRvRXF1YWwoWy4uLm9sZFN0YXRlLCAuLi5wYXlsb2FkXSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaWdub3JlIGR1cGxpY2F0ZSBpdGVtcyBvbiBTRUxFQ1RfSVRFTVMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBvbGRTdGF0ZSA9IFt7IGlkOiAxIH0sIHsgaWQ6IDIgfV07XG4gICAgICBjb25zdCBwYXlsb2FkID0gW3sgaWQ6IDIgfSwgeyBpZDogMyB9XTtcbiAgICAgIGNvbnN0IG5ld1N0YXRlID0gcmVkdWNlcihvbGRTdGF0ZSwge1xuICAgICAgICB0eXBlOiBTRUxFQ1RfSVRFTVMsXG4gICAgICAgIHBheWxvYWQsXG4gICAgICAgIG1ldGE6IHtcbiAgICAgICAgICBuYW1lc3BhY2U6IFRFU1RfTkFNRVNQQUNFLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBleHBlY3QobmV3U3RhdGUpLnRvRXF1YWwoW3sgaWQ6IDEgfSwgeyBpZDogMiB9LCB7IGlkOiAzIH1dKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgVU5TRUxFQ1RfSVRFTVMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBvbGRTdGF0ZSA9IFt7IGlkOiAxIH0sIHsgaWQ6IDIgfSwgeyBpZDogMyB9XTtcbiAgICAgIGNvbnN0IHBheWxvYWQgPSBbeyBpZDogMiB9LCB7IGlkOiAzIH1dO1xuICAgICAgY29uc3QgbmV3U3RhdGUgPSByZWR1Y2VyKG9sZFN0YXRlLCB7XG4gICAgICAgIHR5cGU6IFVOU0VMRUNUX0lURU1TLFxuICAgICAgICBwYXlsb2FkLFxuICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgbmFtZXNwYWNlOiBURVNUX05BTUVTUEFDRSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KG5ld1N0YXRlKS50b0VxdWFsKFt7IGlkOiAxIH1dKTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdUT0dHTEVfQUxMX0lURU1TJywgKCkgPT4ge1xuICAgICAgdGVzdCgnc2hvdWxkIGFkZCBub24tc2VsZWN0ZWQgaXRlbXMgaW4gY2FzZSB0aGVyZSBhcmUgc29tZScsICgpID0+IHtcbiAgICAgICAgY29uc3Qgb2xkU3RhdGUgPSBbeyBpZDogMSB9XTtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IFt7IGlkOiAxIH0sIHsgaWQ6IDIgfSwgeyBpZDogMyB9XTtcbiAgICAgICAgY29uc3QgbmV3U3RhdGUgPSByZWR1Y2VyKG9sZFN0YXRlLCB7XG4gICAgICAgICAgdHlwZTogVE9HR0xFX0FMTF9JVEVNUyxcbiAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgIG1ldGE6IHtcbiAgICAgICAgICAgIG5hbWVzcGFjZTogVEVTVF9OQU1FU1BBQ0UsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGV4cGVjdChuZXdTdGF0ZSkudG9FcXVhbChbeyBpZDogMSB9LCB7IGlkOiAyIH0sIHsgaWQ6IDMgfV0pO1xuICAgICAgfSk7XG5cbiAgICAgIHRlc3QoJ3Nob3VsZCB1bnNlbGVjdCBpdGVtcyBpbiBjYXNlIHRoZXJlIGFyZSBubyBuZXcgaXRlbXMnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG9sZFN0YXRlID0gW3sgaWQ6IDEgfSwgeyBpZDogMiB9XTtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IFt7IGlkOiAxIH1dO1xuICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IHJlZHVjZXIob2xkU3RhdGUsIHtcbiAgICAgICAgICB0eXBlOiBUT0dHTEVfQUxMX0lURU1TLFxuICAgICAgICAgIHBheWxvYWQsXG4gICAgICAgICAgbWV0YToge1xuICAgICAgICAgICAgbmFtZXNwYWNlOiBURVNUX05BTUVTUEFDRSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgZXhwZWN0KG5ld1N0YXRlKS50b0VxdWFsKFt7IGlkOiAyIH1dKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBVTlNFTEVDVF9BTExfSVRFTVMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBvbGRTdGF0ZSA9IFt7IGlkOiAyIH0sIHsgaWQ6IDMgfV07XG4gICAgICBjb25zdCBuZXdTdGF0ZSA9IHJlZHVjZXIob2xkU3RhdGUsIHtcbiAgICAgICAgdHlwZTogVU5TRUxFQ1RfQUxMX0lURU1TLFxuICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgbmFtZXNwYWNlOiBURVNUX05BTUVTUEFDRSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KG5ld1N0YXRlKS50b0VxdWFsKFtdKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgVE9HR0xFX0lURU1fU0VMRUNUSU9OJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb2xkU3RhdGUgPSBbeyBpZDogMSB9XTtcbiAgICAgIGNvbnN0IHN0YXRlV2l0aFR3b0l0ZW1zID0gcmVkdWNlcihvbGRTdGF0ZSwge1xuICAgICAgICB0eXBlOiBUT0dHTEVfSVRFTV9TRUxFQ1RJT04sXG4gICAgICAgIHBheWxvYWQ6IHsgaWQ6IDMgfSxcbiAgICAgICAgbWV0YToge1xuICAgICAgICAgIG5hbWVzcGFjZTogVEVTVF9OQU1FU1BBQ0UsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChzdGF0ZVdpdGhUd29JdGVtcykudG9FcXVhbChbeyBpZDogMSB9LCB7IGlkOiAzIH1dKTtcbiAgICAgIGNvbnN0IHN0YXRlV2l0aE9uZUl0ZW0gPSByZWR1Y2VyKHN0YXRlV2l0aFR3b0l0ZW1zLCB7XG4gICAgICAgIHR5cGU6IFRPR0dMRV9JVEVNX1NFTEVDVElPTixcbiAgICAgICAgcGF5bG9hZDogeyBpZDogMSB9LFxuICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgbmFtZXNwYWNlOiBURVNUX05BTUVTUEFDRSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KHN0YXRlV2l0aE9uZUl0ZW0pLnRvRXF1YWwoW3sgaWQ6IDMgfV0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl19