0aa369d3d172de1dcd4c06e2e4fa290d
'use strict';Object.defineProperty(exports, "__esModule", { value: true });var _regenerator = require('babel-runtime/regenerator');var _regenerator2 = _interopRequireDefault(_regenerator);exports.















































fetchSagas = fetchSagas;var _effects = require('redux-saga/effects');var _utils = require('common/utils');var _notification = require('controllers/notification');var _constants = require('./constants');var _actionCreators = require('./actionCreators');function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}var _marked = /*#__PURE__*/_regenerator2.default.mark(bulkFetchData),_marked2 = /*#__PURE__*/_regenerator2.default.mark(fetchData),_marked3 = /*#__PURE__*/_regenerator2.default.mark(watchBulkFetchData),_marked4 = /*#__PURE__*/_regenerator2.default.mark(watchFetchData),_marked5 = /*#__PURE__*/_regenerator2.default.mark(handleError),_marked6 = /*#__PURE__*/_regenerator2.default.mark(watchFetchError),_marked7 = /*#__PURE__*/_regenerator2.default.mark(fetchSagas);var silentFetch = function silentFetch() {return _utils.fetch.apply(undefined, arguments).catch(function () {return null;});};function bulkFetchData(_ref) {var payload = _ref.payload,meta = _ref.meta;var namespace, urls, fetchFunc, responses;return _regenerator2.default.wrap(function bulkFetchData$(_context) {while (1) {switch (_context.prev = _context.next) {case 0:namespace = meta.namespace;urls = payload.urls;fetchFunc = meta.silent ? silentFetch : _utils.fetch;_context.prev = 3;_context.next = 6;return (0, _effects.put)((0, _actionCreators.fetchStartAction)(namespace, payload));case 6:_context.next = 8;return (0, _effects.all)(urls.map(function (url) {return (0, _effects.call)(fetchFunc, url, payload.options);}));case 8:responses = _context.sent;_context.next = 11;return (0, _effects.put)((0, _actionCreators.fetchSuccessAction)(namespace, responses));case 11:_context.next = 17;break;case 13:_context.prev = 13;_context.t0 = _context['catch'](3);_context.next = 17;return (0, _effects.put)((0, _actionCreators.fetchErrorAction)(namespace, _context.t0));case 17:case 'end':return _context.stop();}}}, _marked, this, [[3, 13]]);}function fetchData(_ref2) {var payload = _ref2.payload,meta = _ref2.meta;var namespace, response;return _regenerator2.default.wrap(function fetchData$(_context2) {while (1) {switch (_context2.prev = _context2.next) {case 0:namespace = meta.namespace;_context2.prev = 1;_context2.next = 4;return (0, _effects.put)((0, _actionCreators.fetchStartAction)(namespace, payload));case 4:_context2.next = 6;return (0, _effects.call)(_utils.fetch, payload.url, payload.options);case 6:response = _context2.sent;_context2.next = 9;return (0, _effects.put)((0, _actionCreators.fetchSuccessAction)(namespace, response));case 9:_context2.next = 15;break;case 11:_context2.prev = 11;_context2.t0 = _context2['catch'](1);_context2.next = 15;return (0, _effects.put)((0, _actionCreators.fetchErrorAction)(namespace, _context2.t0));case 15:case 'end':return _context2.stop();}}}, _marked2, this, [[1, 11]]);}function watchBulkFetchData() {return _regenerator2.default.wrap(function watchBulkFetchData$(_context3) {while (1) {switch (_context3.prev = _context3.next) {case 0:_context3.next = 2;return (0, _effects.takeEvery)(_constants.BULK_FETCH_DATA, bulkFetchData);case 2:case 'end':return _context3.stop();}}}, _marked3, this);}function watchFetchData() {return _regenerator2.default.wrap(function watchFetchData$(_context4) {while (1) {switch (_context4.prev = _context4.next) {case 0:_context4.next = 2;return (0, _effects.takeEvery)(_constants.FETCH_DATA, fetchData);case 2:case 'end':return _context4.stop();}}}, _marked4, this);}function handleError(_ref3) {var payload = _ref3.payload;return _regenerator2.default.wrap(function handleError$(_context5) {while (1) {switch (_context5.prev = _context5.next) {case 0:_context5.next = 2;return (0, _effects.put)((0, _notification.showNotification)({ message: payload.message, type: _notification.NOTIFICATION_TYPES.ERROR }));case 2:case 'end':return _context5.stop();}}}, _marked5, this);}function watchFetchError() {return _regenerator2.default.wrap(function watchFetchError$(_context6) {while (1) {switch (_context6.prev = _context6.next) {case 0:_context6.next = 2;return (0, _effects.takeEvery)(_constants.FETCH_ERROR, handleError);case 2:case 'end':return _context6.stop();}}}, _marked6, this);}function fetchSagas() {return _regenerator2.default.wrap(function fetchSagas$(_context7) {while (1) {switch (_context7.prev = _context7.next) {case 0:_context7.next = 2;return (
            (0, _effects.all)([watchFetchData(), watchFetchError(), watchBulkFetchData()]));case 2:case 'end':return _context7.stop();}}}, _marked7, this);};var _temp = function () {if (typeof __REACT_HOT_LOADER__ === 'undefined') {return;}__REACT_HOT_LOADER__.register(silentFetch, 'silentFetch', '/volumeC/workspace/service-ui - RELEASE/src/github.com/reportportal/service-ui/app/src/controllers/fetch/sagas.js');__REACT_HOT_LOADER__.register(bulkFetchData, 'bulkFetchData', '/volumeC/workspace/service-ui - RELEASE/src/github.com/reportportal/service-ui/app/src/controllers/fetch/sagas.js');__REACT_HOT_LOADER__.register(fetchData, 'fetchData', '/volumeC/workspace/service-ui - RELEASE/src/github.com/reportportal/service-ui/app/src/controllers/fetch/sagas.js');__REACT_HOT_LOADER__.register(watchBulkFetchData, 'watchBulkFetchData', '/volumeC/workspace/service-ui - RELEASE/src/github.com/reportportal/service-ui/app/src/controllers/fetch/sagas.js');__REACT_HOT_LOADER__.register(watchFetchData, 'watchFetchData', '/volumeC/workspace/service-ui - RELEASE/src/github.com/reportportal/service-ui/app/src/controllers/fetch/sagas.js');__REACT_HOT_LOADER__.register(handleError, 'handleError', '/volumeC/workspace/service-ui - RELEASE/src/github.com/reportportal/service-ui/app/src/controllers/fetch/sagas.js');__REACT_HOT_LOADER__.register(watchFetchError, 'watchFetchError', '/volumeC/workspace/service-ui - RELEASE/src/github.com/reportportal/service-ui/app/src/controllers/fetch/sagas.js');__REACT_HOT_LOADER__.register(fetchSagas, 'fetchSagas', '/volumeC/workspace/service-ui - RELEASE/src/github.com/reportportal/service-ui/app/src/controllers/fetch/sagas.js');}();;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNhZ2FzLmpzIl0sIm5hbWVzIjpbImZldGNoU2FnYXMiLCJidWxrRmV0Y2hEYXRhIiwiZmV0Y2hEYXRhIiwid2F0Y2hCdWxrRmV0Y2hEYXRhIiwid2F0Y2hGZXRjaERhdGEiLCJoYW5kbGVFcnJvciIsIndhdGNoRmV0Y2hFcnJvciIsInNpbGVudEZldGNoIiwiZmV0Y2giLCJjYXRjaCIsInBheWxvYWQiLCJtZXRhIiwibmFtZXNwYWNlIiwidXJscyIsImZldGNoRnVuYyIsInNpbGVudCIsIm1hcCIsInVybCIsIm9wdGlvbnMiLCJyZXNwb25zZXMiLCJyZXNwb25zZSIsIkJVTEtfRkVUQ0hfREFUQSIsIkZFVENIX0RBVEEiLCJtZXNzYWdlIiwidHlwZSIsIk5PVElGSUNBVElPTl9UWVBFUyIsIkVSUk9SIiwiRkVUQ0hfRVJST1IiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWdEaUJBLFUsR0FBQUEsVSxDQWhEakIsNkNBQ0EscUNBQ0Esd0RBQ0Esd0NBQ0Esa0QsbUpBSVVDLGEscURBYUFDLFMscURBV0FDLGtCLHFEQUlBQyxjLHFEQUlBQyxXLHFEQUlBQyxlLHFEQUlPTixVLEVBMUNqQixJQUFNTyxjQUFjLFNBQWRBLFdBQWMsV0FBYUMseUNBQWVDLEtBQWYsQ0FBcUIsb0JBQU0sSUFBTixFQUFyQixDQUFiLEVBQXBCLENBRUEsU0FBVVIsYUFBVixZQUEwQlMsT0FBMUIsUUFBMEJBLE9BQTFCLENBQW1DQyxJQUFuQyxRQUFtQ0EsSUFBbkMsMEtBQ1FDLFNBRFIsR0FDb0JELEtBQUtDLFNBRHpCLENBRVFDLElBRlIsR0FFZUgsUUFBUUcsSUFGdkIsQ0FHUUMsU0FIUixHQUdvQkgsS0FBS0ksTUFBTCxHQUFjUixXQUFkLEdBQTRCQyxZQUhoRCw0Q0FLVSxrQkFBSSxzQ0FBaUJJLFNBQWpCLEVBQTRCRixPQUE1QixDQUFKLENBTFYsaUNBTTRCLGtCQUFJRyxLQUFLRyxHQUFMLENBQVMsVUFBQ0MsR0FBRCxVQUFTLG1CQUFLSCxTQUFMLEVBQWdCRyxHQUFoQixFQUFxQlAsUUFBUVEsT0FBN0IsQ0FBVCxFQUFULENBQUosQ0FONUIsUUFNVUMsU0FOViwyQ0FPVSxrQkFBSSx3Q0FBbUJQLFNBQW5CLEVBQThCTyxTQUE5QixDQUFKLENBUFYsMEhBU1Usa0JBQUksc0NBQWlCUCxTQUFqQixjQUFKLENBVFYsMkVBYUEsU0FBVVYsU0FBVixhQUFzQlEsT0FBdEIsU0FBc0JBLE9BQXRCLENBQStCQyxJQUEvQixTQUErQkEsSUFBL0IsdUpBQ1FDLFNBRFIsR0FDb0JELEtBQUtDLFNBRHpCLDhDQUdVLGtCQUFJLHNDQUFpQkEsU0FBakIsRUFBNEJGLE9BQTVCLENBQUosQ0FIVixrQ0FJMkIsbUJBQUtGLFlBQUwsRUFBWUUsUUFBUU8sR0FBcEIsRUFBeUJQLFFBQVFRLE9BQWpDLENBSjNCLFFBSVVFLFFBSlYsNENBS1Usa0JBQUksd0NBQW1CUixTQUFuQixFQUE4QlEsUUFBOUIsQ0FBSixDQUxWLDhIQU9VLGtCQUFJLHNDQUFpQlIsU0FBakIsZUFBSixDQVBWLDZFQVdBLFNBQVVULGtCQUFWLHFLQUNRLHdCQUFVa0IsMEJBQVYsRUFBMkJwQixhQUEzQixDQURSLGlFQUlBLFNBQVVHLGNBQVYsaUtBQ1Esd0JBQVVrQixxQkFBVixFQUFzQnBCLFNBQXRCLENBRFIsaUVBSUEsU0FBVUcsV0FBVixhQUF3QkssT0FBeEIsU0FBd0JBLE9BQXhCLDJKQUNRLGtCQUFJLG9DQUFpQixFQUFFYSxTQUFTYixRQUFRYSxPQUFuQixFQUE0QkMsTUFBTUMsaUNBQW1CQyxLQUFyRCxFQUFqQixDQUFKLENBRFIsaUVBSUEsU0FBVXBCLGVBQVYsa0tBQ1Esd0JBQVVxQixzQkFBVixFQUF1QnRCLFdBQXZCLENBRFIsaUVBSU8sU0FBVUwsVUFBVjtBQUNDLDhCQUFJLENBQUNJLGdCQUFELEVBQW1CRSxpQkFBbkIsRUFBc0NILG9CQUF0QyxDQUFKLENBREQsa0Usa0hBMUNESSxXLG9LQUVJTixhLHNLQWFBQyxTLGtLQVdBQyxrQiwyS0FJQUMsYyx1S0FJQUMsVyxvS0FJQUMsZSx3S0FJT04sVSIsImZpbGUiOiJzYWdhcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHRha2VFdmVyeSwgY2FsbCwgYWxsLCBwdXQgfSBmcm9tICdyZWR1eC1zYWdhL2VmZmVjdHMnO1xuaW1wb3J0IHsgZmV0Y2ggfSBmcm9tICdjb21tb24vdXRpbHMnO1xuaW1wb3J0IHsgc2hvd05vdGlmaWNhdGlvbiwgTk9USUZJQ0FUSU9OX1RZUEVTIH0gZnJvbSAnY29udHJvbGxlcnMvbm90aWZpY2F0aW9uJztcbmltcG9ydCB7IEZFVENIX0RBVEEsIEZFVENIX0VSUk9SLCBCVUxLX0ZFVENIX0RBVEEgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBmZXRjaFN1Y2Nlc3NBY3Rpb24sIGZldGNoU3RhcnRBY3Rpb24sIGZldGNoRXJyb3JBY3Rpb24gfSBmcm9tICcuL2FjdGlvbkNyZWF0b3JzJztcblxuY29uc3Qgc2lsZW50RmV0Y2ggPSAoLi4uYXJncykgPT4gZmV0Y2goLi4uYXJncykuY2F0Y2goKCkgPT4gbnVsbCk7XG5cbmZ1bmN0aW9uKiBidWxrRmV0Y2hEYXRhKHsgcGF5bG9hZCwgbWV0YSB9KSB7XG4gIGNvbnN0IG5hbWVzcGFjZSA9IG1ldGEubmFtZXNwYWNlO1xuICBjb25zdCB1cmxzID0gcGF5bG9hZC51cmxzO1xuICBjb25zdCBmZXRjaEZ1bmMgPSBtZXRhLnNpbGVudCA/IHNpbGVudEZldGNoIDogZmV0Y2g7XG4gIHRyeSB7XG4gICAgeWllbGQgcHV0KGZldGNoU3RhcnRBY3Rpb24obmFtZXNwYWNlLCBwYXlsb2FkKSk7XG4gICAgY29uc3QgcmVzcG9uc2VzID0geWllbGQgYWxsKHVybHMubWFwKCh1cmwpID0+IGNhbGwoZmV0Y2hGdW5jLCB1cmwsIHBheWxvYWQub3B0aW9ucykpKTtcbiAgICB5aWVsZCBwdXQoZmV0Y2hTdWNjZXNzQWN0aW9uKG5hbWVzcGFjZSwgcmVzcG9uc2VzKSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHlpZWxkIHB1dChmZXRjaEVycm9yQWN0aW9uKG5hbWVzcGFjZSwgZXJyKSk7XG4gIH1cbn1cblxuZnVuY3Rpb24qIGZldGNoRGF0YSh7IHBheWxvYWQsIG1ldGEgfSkge1xuICBjb25zdCBuYW1lc3BhY2UgPSBtZXRhLm5hbWVzcGFjZTtcbiAgdHJ5IHtcbiAgICB5aWVsZCBwdXQoZmV0Y2hTdGFydEFjdGlvbihuYW1lc3BhY2UsIHBheWxvYWQpKTtcbiAgICBjb25zdCByZXNwb25zZSA9IHlpZWxkIGNhbGwoZmV0Y2gsIHBheWxvYWQudXJsLCBwYXlsb2FkLm9wdGlvbnMpO1xuICAgIHlpZWxkIHB1dChmZXRjaFN1Y2Nlc3NBY3Rpb24obmFtZXNwYWNlLCByZXNwb25zZSkpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB5aWVsZCBwdXQoZmV0Y2hFcnJvckFjdGlvbihuYW1lc3BhY2UsIGVycikpO1xuICB9XG59XG5cbmZ1bmN0aW9uKiB3YXRjaEJ1bGtGZXRjaERhdGEoKSB7XG4gIHlpZWxkIHRha2VFdmVyeShCVUxLX0ZFVENIX0RBVEEsIGJ1bGtGZXRjaERhdGEpO1xufVxuXG5mdW5jdGlvbiogd2F0Y2hGZXRjaERhdGEoKSB7XG4gIHlpZWxkIHRha2VFdmVyeShGRVRDSF9EQVRBLCBmZXRjaERhdGEpO1xufVxuXG5mdW5jdGlvbiogaGFuZGxlRXJyb3IoeyBwYXlsb2FkIH0pIHtcbiAgeWllbGQgcHV0KHNob3dOb3RpZmljYXRpb24oeyBtZXNzYWdlOiBwYXlsb2FkLm1lc3NhZ2UsIHR5cGU6IE5PVElGSUNBVElPTl9UWVBFUy5FUlJPUiB9KSk7XG59XG5cbmZ1bmN0aW9uKiB3YXRjaEZldGNoRXJyb3IoKSB7XG4gIHlpZWxkIHRha2VFdmVyeShGRVRDSF9FUlJPUiwgaGFuZGxlRXJyb3IpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24qIGZldGNoU2FnYXMoKSB7XG4gIHlpZWxkIGFsbChbd2F0Y2hGZXRjaERhdGEoKSwgd2F0Y2hGZXRjaEVycm9yKCksIHdhdGNoQnVsa0ZldGNoRGF0YSgpXSk7XG59XG4iXX0=